var documenterSearchIndex = {"docs":
[{"location":"","page":"Home","title":"Home","text":"CurrentModule = SeqLoggers","category":"page"},{"location":"#SeqLoggers","page":"Home","title":"SeqLoggers","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"","category":"page"},{"location":"","page":"Home","title":"Home","text":"Modules = [SeqLoggers]","category":"page"},{"location":"#SeqLoggers.SeqLogger-Tuple{AbstractString}","page":"Home","title":"SeqLoggers.SeqLogger","text":"SeqLogger(\n    server_url::AbstractString;\n    min_level::Logging.LogLevel=Logging.Info,\n    api_key::AbstractString=\"\",\n    batch_size::Int=10,\n    event_properties...\n)\n\nLogger to post log events to a Seq log server.\n\nInputs\n\nserver_url – Seq server url (e.g. \"http://localhost:5341\")\nmin_level – (optional, default=Logging.Info) minimal log level to filter the log events\napi_key –  (optional, default=\"\") API-key string for registered Applications\nbatch_size – (optional, default=10) number of log events sent to Seq server in single post\nevent_properties – (optional) global log event properties\n\nGlobal Log Event Properties\n\nThe SeqLogger constructor allows to add global log event properties to the logger using   keyword-arguments.\n\nSeqLogger(\"http://localhost:5341\"; App=\"DJSON\", Env=\"PROD\", Id=\"24e0d145-d385-424b-b6ec-081aa17d504a\")\n\nLocal Log Event Properties\n\nFor each individual log event, additional log event properties can be added which only apply to a single log event.\n\n@info \"Log additional user id {userId}\" userId=\"1\"\n\nNote: This only works, if the Logging.current_logger is of type SeqLogger or \"contains\" a SeqLogger.\n\n\n\n\n\n","category":"method"},{"location":"#Logging.handle_message-Tuple{SeqLogger,Vararg{Any,N} where N}","page":"Home","title":"Logging.handle_message","text":"Logging.handle_message(logger::SeqLogger, args...; kwargs...)\n\nExtends the function Logging.handle_message for SeqLoggers.\n\nNote\n\nIf the event batch of the logger is \"full\", the log events are flushed.\nA ReentrantLock is used to make the logger thread-safe. \n\n\n\n\n\n","category":"method"},{"location":"#Logging.with_logger-Tuple{Function,LoggingExtras.TeeLogger}","page":"Home","title":"Logging.with_logger","text":"Logging.with_logger(@nospecialize(f::Function), demuxLogger::TeeLogger)\n\nExtends the method Logging.with_logger to work for a LoggingExtras.TeeLogger containing a SeqLogger.\n\nNote\n\nThis constitutes as type piracy and should be treated with caution. But it is necessary such that also TeeLoggers that contain a SeqLogger do flush  the log events after exiting the with_logger function.\n\n\n\n\n\n","category":"method"},{"location":"#Logging.with_logger-Tuple{Function,SeqLogger}","page":"Home","title":"Logging.with_logger","text":"Logging.with_logger(@nospecialize(f::Function), logger::SeqLogger)\n\nExtends the function Logging.with_logger for SeqLoggers.\n\nNote\n\nAfter running the function f, the SeqLogger needs to flush the log events to make sure that the entire log batch is sent to the Seq server.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.add_timestamp-Tuple{Any}","page":"Home","title":"SeqLoggers.add_timestamp","text":"add_timestamp(logger::AbstractLogger)\n\nLogger transformation function that prepends a timestamp to a logging message.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.event_property!-Tuple{LoggingExtras.TeeLogger}","page":"Home","title":"SeqLoggers.event_property!","text":"event_property!(teelogger::LoggingExtras.TeeLogger; kwargs...)\n\nExtend event_property! to a work for a LoggingExtras.TeeLogger containing a SeqLogger.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.event_property!-Tuple{SeqLogger}","page":"Home","title":"SeqLoggers.event_property!","text":"event_property!(logger::SeqLogger; kwargs...)\n\nAdd one or more event properties to the list of global event properties in logger.\n\nExample\n\nevent_property!(logger, user=\"Me\", userId=1)\n\nNote\n\nIf a new event property with identical name as an existing on is added with event_property!, the existing property in new_event_properties is not replaced, the new property is just added to new_event_properties. However, this still works since on the Seq side the raw post events considers the last property key as the final one if more than one has the same key.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.flush_current_logger-Tuple{}","page":"Home","title":"SeqLoggers.flush_current_logger","text":"flush_current_logger()\n\nPost the events in the logger batch event for the logger for the current task, or the global logger if none is attached to the task.\n\nNote\n\nIn the main moduel of Atom, the current_logger is Atom.Progress.JunoProgressLogger(). Therefore, if you set SeqLogger as a Logging.global_logger in in Atom use flush_global_logger.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.flush_events-Tuple{LoggingExtras.TeeLogger}","page":"Home","title":"SeqLoggers.flush_events","text":"flush_events(teeLogger::LoggingExtras.TeeLogger)\n\nExtend flush_events to a work for a LoggingExtras.TeeLogger containing a SeqLogger.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.flush_events-Tuple{SeqLogger}","page":"Home","title":"SeqLoggers.flush_events","text":"flush_events(logger::SeqLogger)\n\nPost all log events contained in the event batch of logger to the Seq server and  clear the event batch afterwards.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.flush_global_logger-Tuple{}","page":"Home","title":"SeqLoggers.flush_global_logger","text":"flush_global_logger()\n\nPost the events in the logger batch event for the global logger.\n\nNote\n\nIf the logger is run with Logging.with_logger, this is considered a current logger Logging.current_logger and  flush_current_logger. needs to be used.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.get_log_level-Tuple{String}","page":"Home","title":"SeqLoggers.get_log_level","text":"get_log_level(key::String)::Logging.LogLevel\n\nReturn the Loggin.LogLevel corresponding to the input string.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.get_logger-Tuple{AbstractString,AbstractDict}","page":"Home","title":"SeqLoggers.get_logger","text":"get_logger(logger_type::AbstractString, logger_config::AbstractDict)::AbstractLogger\n\nCreate logger struct from logger type name and Dict with required parameters.\n\nBy default, the following logger types are supported:\n\n\"SeqLogger\" → SeqLogger\n\"ConsoleLogger\" → ConsoleLogger\n\"FileLogger\" → FileLogger\n\nUse register_logger! to add custom AbstractLoggers.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.get_transformation_function-Tuple{String}","page":"Home","title":"SeqLoggers.get_transformation_function","text":"get_transformation_function(key::String)\n\nConvert a string (from config) into a transformation function.\n\nBy default, the following transformation functions are supported:\n\n\"identity\" → identity: no transformation\n\"add_timestamp\" → add_timestamp: add timestamp at the beginning of log message\n\nUse register_transformation_function! to add custom transformation functions.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.joinurl-Tuple{AbstractString,AbstractString}","page":"Home","title":"SeqLoggers.joinurl","text":"joinurl(left::AbstractString, right::AbstractString)\n\nJoin the left and right part of a URL, by removing trailing frontslashes and add an additional frontslashes if required.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.load_consolelogger-Tuple{AbstractDict}","page":"Home","title":"SeqLoggers.load_consolelogger","text":"load_consolelogger(logger_config::AbstractDict)::Union{ConsoleLogger, TransformerLogger}\n\nReturn a ConsoleLogger or TransformerLogger according to logger_config.\n\nConfig Parameters\n\n\"min_level\" – required (\"DEBUG\", \"INFO\", \"WARN\", \"ERROR\")\n\"transformation\" – optional, default identity\n\nExample\n\nlogging_config = Dict(\n    \"min_level\" => \"ERROR\",\n    \"transformation\" => \"add_timestamp\",\n)\n\nseq_logger = SeqLoggers.load_consolelogger(log_dict)\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.load_filelogger-Tuple{AbstractDict}","page":"Home","title":"SeqLoggers.load_filelogger","text":"load_consolelogger(logger_config::AbstractDict)::AbstractLogger\n\nReturn a MinLevelLogger{FileLogger} or TransformerLogger according to logger_config.\n\nConfig Parameters\n\n\"file_path\" – required\n\"min_level\" – required (\"DEBUG\", \"INFO\", \"WARN\", \"ERROR\")\n\"append\" – optional, default true, append to file if true, otherwise truncate file. (See LoggingExtras.FileLogger for more information.)\n\"transformation\" – optional, default identity\n\nExample\n\nlogging_config = Dict(\n    \"min_level\" => \"ERROR\",\n    \"transformation\" => \"add_timestamp\",\n)\nseq_logger = SeqLoggers.load_consolelogger(log_dict)\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.load_logger_from_config-Tuple{AbstractDict}","page":"Home","title":"SeqLoggers.load_logger_from_config","text":"load_logger_from_config(config::Dict)::TeeLogger\n\nCreate a TeeLoger, a collection of logger, from a configuration Dict.\n\nNote\n\nA TeeLogger struct allows to send the same log message  to  all loggers included in the TeeLoger at once.\nThe configuration Dict requires as \"logging\" field, see example for more details.\n\nExample\n\nconfig = Dict(\n    ...,\n    \"logging\" => [\n        # logger_type => logger_config_dict,\n        \"SeqLogger\" => Dict(...),\n        ...\n    ],\n    ...\n)\n\nReturns\n\nTeeLogger as defined in config\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.load_logger_from_config-Tuple{AbstractString}","page":"Home","title":"SeqLoggers.load_logger_from_config","text":"load_logger_from_config(file_path::AbstractString)::TeeLogger\n\nCreate a combined logger from a config file path.\n\nNote\n\nA combined logger is a TeeLogger struct that allows to send the same log message to  all loggers included in the combined logger at once.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.load_seqlogger-Tuple{AbstractDict}","page":"Home","title":"SeqLoggers.load_seqlogger","text":"load_seqlogger(logger_config::AbstractDict)::Union{SeqLogger, TransformerLogger}\n\nReturn a SeqLogger or TransformerLogger according to logger_config.\n\nConfig Parameters\n\n\"server_url\" – required\n\"min_level\" – required (\"DEBUG\", \"INFO\", \"WARN\", \"ERROR\")\n\"transformation\" – optional, default identity\n\"api_key\" – optional, default \"\"\n\"batch_size\" – optional, default 10\n\nAll other config parameters are used as global event properties.\n\nExample\n\nlog_dict = Dict(\n    \"server_url\" => \"http://subdn215:5341/\",\n    \"min_level\" => \"INFO\",\n    \"batch_size\" => 12,\n    \"App\" => \"SeqLoggers_Test\",\n    \"Env\" => \"Test\"\n)\nseq_logger = SeqLoggers.load_seqlogger(log_dict)\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.parse_event_str_from_args-Tuple{SeqLogger,NamedTuple}","page":"Home","title":"SeqLoggers.parse_event_str_from_args","text":"parse_event_str_from_args(logger::SeqLogger, message_args::NamedTuple)::String\n\nCreate a log event string from the named tuple message_args.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.post_log_events-Tuple{SeqLogger,AbstractString}","page":"Home","title":"SeqLoggers.post_log_events","text":"post_request(logger::SeqLogger, json_str::AbstractString)\n\nSend POST request with body json_str to Seq server.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.register_logger!-Tuple{AbstractString,Function}","page":"Home","title":"SeqLoggers.register_logger!","text":"register_logger!(logger_type::AbstractString, logger_constructor::Function)\n\nRegister a new logger type.\n\nRegistering enables the user to use custom AbstractLogger struct, defined outside of SeqLoggers, to be used with load_logger_from_config.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.register_transformation_function!-Tuple{AbstractString,Function}","page":"Home","title":"SeqLoggers.register_transformation_function!","text":"register_transformation_function!(key::AbstractString, transformation_function::Function)\n\nRegister new transformation function.\n\nRegistering enables the user to use custom transformation functions, defined outside of SeqLoggers, to be used with load_logger_from_config.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.run_with_logger-Tuple{Function,Base.CoreLogging.AbstractLogger,Vararg{Any,N} where N}","page":"Home","title":"SeqLoggers.run_with_logger","text":"run_with_logger(f::Function, logger::AbstractLogger, args...)\n\nHelper function that applies advanced event logging to the execution of f(args...).\n\nIn addition to normal log events (@info, ...), the logger catches exceptions to create error log events. Afterwards, the exception will continue propagation as if it had not been caught.\n\nInputs\n\nf – function to execute\nargs – function arguments\n\nRetunrs\n\nResult from applying f(args...) including thrown exceptions.\n\nNotes\n\nThe function run_with_logger applies a new logger to the function call f(args...). All loggers applied on a \"higher level\" are replaced for the lifespan of the function call.\n\nExample\n\nlogger = ConsoleLogger(stderr, Logging.Info)\nrun_with_logger(logger, -3) do number\n    @info \"Compute square root for negative number: $number\"\n    sqrt(number)\nend\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.stringify-Tuple{}","page":"Home","title":"SeqLoggers.stringify","text":"stringify(; kwargs...)\n\nConvert keywords arguments into a string that conforms the log event message structure used in the Seq logger.\n\n\n\n\n\n","category":"method"},{"location":"#SeqLoggers.to_seq_level-Tuple{Base.CoreLogging.LogLevel}","page":"Home","title":"SeqLoggers.to_seq_level","text":"to_seq_level(log_level::Base.CoreLogging.LogLevel)\n\nGiven a Logging.LogLevel return the string identifier for the log level used on the Seq server.\n\n\n\n\n\n","category":"method"}]
}
